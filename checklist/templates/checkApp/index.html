{%  extends 'base.html' %}

{%  block headjs %}
<script type="text/javascript">

    $(document).ready(function(){
        $('form#createCheckList').submit(function(){
            $.post("{% url checkApp.views.createCheckList %}", $('#createCheckList').serialize(), function(resp){
            var item = resp[0];
            var newlist = '<li class="checkList"><a href="/check/view/' + item.pk + '/">' + item.fields.name + ' - ' +  item.fields.creator + ' - (0)</a></li>';
            $('#checklists').append(newlist);
            },'json');
        return false;
        });
    });

</script>
{%  endblock %}

{%  block content %}
<h1>CheckLists:</h1>
<ul id="checklists">
{%  for check in list %}
    <li class="checkList"><a href="{% url checkApp.views.viewList check.pk  %}">{{ check.name }} - {{ check.creator }} - ({{ check.tasks.count }})</a></li>

{% endfor %}
</ul>
    {% load widget_tweaks %}
    <form action="#" method="post" id="createCheckList">
        {%  csrf_token %}
        {{  form.name }}
        {{  form.creator }}
        <input type="submit" value="Create List" class="btn primary">
    </form>
<h2><a href="{% url checkApp.views.viewTemplates %}">Templates</a></h2>
{%  endblock %}